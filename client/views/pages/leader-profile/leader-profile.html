<template name="leaderProfile">
    {{#if isLoading}}
        {{> waveLoading}}
    {{else}}
        <div class="wrapper wrapper-content">
            <div class="row animated fadeInRight">
                <div class="col-md-4">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>My leader</h5>
                        </div>
                        <div>
                            <div class="ibox-content no-padding border-left-right">
                                <img alt="image" class="img-responsive" src="img/profile_big.jpg">
                            </div>
                            <div class="ibox-content profile-content">
                                <h4><strong>{{leader.fullname}}</strong></h4>

                                <h5>
                                    {{leader.headline}}
                                </h5>

                                <div class="user-button">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <a href="{{pathFor 'dashboard' query='action=sendFeedback'}}"
                                               class="btn btn-primary btn-sm btn-block">
                                                <i class="fa fa-comments"></i> Send feedback
                                            </a>
                                        </div>
                                        <div class="col-md-6">
                                            <a href="{{pathFor 'dashboard' query='action=takeSurvey'}}"
                                               class="btn btn-info btn-sm btn-block">
                                                <i class="fa fa-list-alt"></i>&nbsp;Take survey
                                            </a>

                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    {{> feedbackHistory}}
                </div>
            </div>
        </div>

        {{#if isAction "sendfeedback"}}
            {{> sendFeedbackModal}}
        {{/if}}

        {{#if isAction "takesurvey"}}
            {{> takeSurveyModal}}
        {{/if}}

    {{/if}}
</template>


<template name="sendFeedbackModal">
    <div class="modal fade" id="sendFeedbackModal" role="dialog" aria-labelledby="sendFeedbackLabel">

        <div class="modal-dialog" role="document">
            <div class="modal-content">
                {{#autoForm collection="Collections.Feedbacks" id="sendFeedbackForm" type="insert"}}
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="sendFeedbackLabel">Send feedback</h4>
                    </div>
                    <div class="modal-body">
                        {{> afQuickField name='content'}}
                        {{> afQuickField name='point'}}
                        {{> afQuickField name='isAnonymous'}}
                    </div>
                    <div class="modal-footer">
                        <a href="{{pathFor 'dashboard'}}" class="btn btn-default">Close</a>
                        <button type="submit" class="btn btn-primary">Send</button>
                    </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="takeSurveyModal">
    <div class="modal fade" id="takeSurveyModal" role="dialog" aria-labelledby="takeSurveyLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                {{> surveySlider}}
            </div>
        </div>
    </div>
</template>

<template name="surveySlider">
{{#autoForm collection="Collections.Surveys" id="takeSurveyForm" type="insert"}}
    <div class="container-slider">
        <section class="slider">
            {{#each questions}}
                {{> slideSurvey}}
            {{/each}}
            <nav class="slider__nav">
                <span class="button button--nav-prev">
                    <i class="fa fa-arrow-left"></i>
                </span>
                <strong><span class="current-slide">1</span>/11</strong>
                <span class="button button--nav-next">
                    <i class="fa fa-arrow-right"></i>
                </span>
            </nav>
        </section>
        <!-- /slider-->
        <div class="content" style="display: none">
            <button class="button--close"></button>
        </div>
        <div class="modal-footer">
            <a href="{{pathFor 'dashboard'}}" class="btn btn-default">Close</a>
            <button type="submit" class="btn btn-primary">Send</button>
        </div>
    </div>
{{/autoForm}}
</template>

<template name="slideSurvey">
    <div class="slide {{slideClass}}" data-content="content-{{index}}">
        <div class="slide__mover">
            <div class="zoomer flex-center">
                <div class="preview">
                    <i class="{{questionIcon}}"></i>

                    <h1>{{title}}</h1>
                </div>
            </div>
        </div>
        <h2 class="slide__title">
            {{question}}
            <div class="clear survey-point">
                {{> afQuickField name=type}}
            </div>
        </h2>
    </div>
</template>


<template name="ratingSurveys">
    <div class="form-group" data-required="true">
        <div class="af-radio-group">
            {{#each range}}
                {{> ratingItem}}
            {{/each}}

        </div>
    </div>
</template>


<template name="ratingItem">
    <div class="iradio radio-inline fix-indent">
        <input type="radio" value="{{this}}" name="{{../type}}" id="{{../type}}-{{this}}">
    </div>
    <label for="{{../type}}">{{this}}</label>
</template>
